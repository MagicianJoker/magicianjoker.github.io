---
title: "游戏工具开发(二)"
subtitle: "Excel数据"
layout: post
date:   2020-10-05
author: "MagicianJoker"
header-style: text
tags:
  - 工具
  - Unity
---

参考对象

[LuBan](https://luban.doc.code-philosophy.com/docs/intro)

[TEngine](https://github.com/Alex-Rachel/TEngine/tree/main)

根据配置的Excel文件导出程序快捷读取的文件(bytes+结构类)，数据表格支持的类型要够宽泛，减少程序内部再次分割读取内容，常用的结构int,float,string,array,map等等,Luban工具添加了结构类的配置形态，更加方便使用

## 加载类型

1. 全量加载

   初始化的时候把所有表格数据加载完毕，放入内存中。这种情况考量表格文件的大小以及整体消耗的时间程度是否接受

2. 懒惰加载

   随用随加载，只有在使用的时候采取加载表格数据，加载完之后的数据放在内存中，快捷

## 根据LuBan文档安装必要东西

1. 自行安装dotnet sdk8.0或者更高版本的sdk
2. 下载最新的Release版本的LuBan文件，放入Tools文件夹下。
3. 自行修改bat或者sh文件批处理中指引的文件位置以及选择合适的代码输出格式
4. 如果使用的是bin导出格式，由于无法直观的看到具体的数据内容，所以可以额外添加json导出格式到指定目录来检查具体的数据内容
5. Unity在PackageManager中安装luban的插件
6. (可选)在Unity中添加快捷的导出MenuItem,区分对应的平台然后调用对应的bat或者sh文件去执行

## TEngine的Luban加载方式选择

1. TEngine使用的是懒加载的方式来执行配置的加载读取的，根据TEngine提供的表格模板来导出对应的数据
2. TEngine的ConfigSystem和表格的模板都可以直接拿过来使用，然后可以继续进行二次的修改使用
3. TEngine本身提供了Luban的一键式导出与使用，可以根据该项目框架进行组装和修改
4. TEngine的代码加载方式默认是使用的同步加载，这里可能要做一下修改，添加异步或者基于UniTask做资源的加载
